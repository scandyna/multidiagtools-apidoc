<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Multi diag tools: API guide line</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Multi diag tools
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">API guide line </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="getters"></a>
Propoerty access</h1>
<p>When a member function returns a property that is directly known, the function name should be directly similar to the propoerty name. Example: SomeObject::isNull() .</p>
<p>If a member function needs some processing before returning the requested value, it should be prefixed get. For example, we suppose that getting available tables in a database needs to query the database, the function should be named like SomeObject::getAvailableTables(T db).</p>
<h1><a class="anchor" id="return_value"></a>
Return value</h1>
<p>When a function fails, it should be possible to get the reason why it failed. This is done by using the <a class="el" href="class_mdt_1_1_error.html" title="Value class that contains a error. ">Mdt::Error</a> class.</p>
<p>Functionnal classes should store a <a class="el" href="class_mdt_1_1_error.html" title="Value class that contains a error. ">Mdt::Error</a> as member and provide lastError() function. Their member functions should follow these rules:</p><ul>
<li>If the function can fail, but returns no data, it should return a bool and store the error in lastError.</li>
<li>If the function can fail, and returns data, it should return a mdtExpected. For coherence reason, the error should also be stored in lastError.</li>
<li>If the function can fail, and it is static, it should return a <a class="el" href="class_mdt_1_1_expected.html" title="Contains a value or a error. ">Mdt::Expected</a>.</li>
</ul>
<p>Value classes should not have functions that can fail, because they do not, for example, read files. If it occurs that function can fail, they should follow these rules:</p><ul>
<li>If the function can fail, it should return a <a class="el" href="class_mdt_1_1_expected.html" title="Contains a value or a error. ">Mdt::Expected</a>.</li>
</ul>
<h1><a class="anchor" id="error_handlig"></a>
Error handling</h1>
<h2><a class="anchor" id="error_handlig_dialog"></a>
Dialogs</h2>
<p>A dialog is a top level widget that is displayed to the user. When a error occurs, the dialog should also display it to the user.</p>
<p>If a public function can fail (for example setting a file), it should display the error to the user and return false, so the caller knows that something failed and he adapt his flow. </p><dl class="section note"><dt>Note</dt><dd>If something could fail, the dialog should inform the user, and should not be acceptable.</dd></dl>
<h1><a class="anchor" id="ui_files"></a>
Ui files when using QtDesigner</h1>
<p>One of the possible way to use headers generated by uic, is to inherit from the base class and from the class generated by uic. This option requires that ui_*.h is included in the header file of the class. Because this header file is generated during compilation, it will be somwhere in the build tree. For this library, this issue has to be solved, and is by setting correct CMake options. But, the problem will then happen again to the user, which has no access to this ui_*h file.</p>
<p>To solve this issue, the Ui class should be forward declared in the header, used as member of the class, using a unique_ptr. The ui_*h file can also be included in the *.cpp file. See Mdt::ItemEditor::StandardWindow to see a example of this usage.</p>
<h1><a class="anchor" id="translations"></a>
Translations</h1>
<h2><a class="anchor" id="translations_tr"></a>
About using tr()</h2>
<p>When a class is a subclass of QObject, simply using tr() works fine.</p>
<p>For a class that is not a subclass of QObject, Qt recommends using QCoreApplication::translate() and provide the class name as context, so that Qt Linguist can display it the proper way to the translator. Previously, many classes in <a class="el" href="namespace_mdt.html">Mdt</a> libraries have added a tr() static member function, that simply called QObject::tr(). This is bad, because Qt Linguist also displayed all strings as QObject context. The recommanded solution is to use Q_DECLARE_TR_FUNCTIONS() provided in QCoreApplication For example, in MyClass.h: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>MyClass</div><div class="line">{</div><div class="line">  Q_DECLARE_TR_FUNCTIONS(MyClass)</div><div class="line"></div><div class="line"> public:</div><div class="line"></div><div class="line">  MyClass();</div><div class="line">};</div></div><!-- fragment --><p>Note that Qt Linguist trows error messages when a class uses tr() and it does not provide the Q_OBJECT macro, despite the fact that translation file are generated and works. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 1 2017 12:57:35 for Multi diag tools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
